# Log Analyzer æ¶æ§‹è¨­è¨ˆæ–‡æª”

## æ•´é«”å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¸‰éšæ®µæ—¥èªŒåˆ†ææµç¨‹                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬ 1 éšæ®µ      â”‚      â”‚  ç¬¬ 2 éšæ®µ      â”‚      â”‚  ç¬¬ 3 éšæ®µ   â”‚
â”‚  æ•¸æ“šç²å–       â”‚ â”€â”€â”€â†’ â”‚  æ•¸æ“šä¿å­˜       â”‚ â”€â”€â”€â†’ â”‚  æ•¸æ“šåˆ†æ    â”‚
â”‚  (Fetch)       â”‚      â”‚  (Storage)      â”‚      â”‚  (Analysis)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## è©³ç´°æµç¨‹èªªæ˜

### éšæ®µ 1ï¼šæ•¸æ“šç²å– (Fetcher)

#### ğŸ” ç²å–é‚è¼¯

```
æ™‚é–“è»¸ï¼ˆç¾åœ¨å¾€å›çœ‹ï¼‰
â”œâ”€ ç¾åœ¨
â”œâ”€ 1 å°æ™‚å‰ â”€â”€â”
â”œâ”€ 2 å°æ™‚å‰  â”‚ æŸ¥è©¢ç¯„åœ
â”œâ”€ 3 å°æ™‚å‰  â”‚ (last 3h)
â””â”€ 3.5 å°æ™‚å‰â”€â”˜

OpenSearch API ç‰¹æ€§ï¼š
â€¢ å–®æ¬¡æŸ¥è©¢æœ€å¤šè¿”å› 500 ç­†
â€¢ æ”¯æŒ search_after åˆ†é ï¼ˆç„¡é™æ»¾å‹•ï¼‰
â€¢ æŒ‰ @timestamp desc æ’åº
```

#### ğŸ“¦ åˆ†æ‰¹ç²å–æµç¨‹

**ç›®å‰å¯¦ç¾ï¼ˆç°¡å–®ç‰ˆæœ¬ï¼‰**ï¼š

```
go run cmd/test-pagination/main.go -max-batches 5

åŸ·è¡Œæµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Batch 1: æŸ¥è©¢ last 1hï¼Œè¿”å› 0-500 ç­†  â”‚ â†â”€ search_after: null
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
           æœ‰è¿”å› 500 ç­†ï¼Ÿ â”€ æ˜¯ â”€â†’
                    â”‚
                    å¦
                    â†“
            âœ… å®Œæˆï¼Œå…± 1 æ‰¹æ¬¡

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¦‚æœè¦æŸ¥è©¢æ›´å¤šï¼ˆå‡è¨­ç¬¬ 1 æ‰¹è¿”å› 500ï¼‰ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Batch 1: è¿”å› 500 ç­†
         æœ€å¾Œä¸€ç­†: {timestamp: "2026-01-10T10:00:00Z", _id: "doc-500"}
                        â†“
Batch 2: search_after: ["2026-01-10T10:00:00Z", "doc-500"]
         è¿”å› 500 ç­†
                        â†“
Batch 3: search_after: ["2026-01-10T09:30:00Z", "doc-1000"]
         è¿”å› 200 ç­† (çµ‚æ­¢)
```

#### âš ï¸ é—œéµå•é¡Œï¼šæ™‚é–“çª—å£åˆ†å‰²

**ç•¶å‰å¯¦ç¾çš„é™åˆ¶**ï¼š

```
æŸ¥è©¢ï¼š -time 24h -keyword error

å¦‚æœéå» 24 å°æ™‚æœ‰ 2000 ç­†éŒ¯èª¤æ—¥èªŒï¼š

âŒ å•é¡Œï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å–®æ¬¡æŸ¥è©¢æœƒä¸Ÿå¤± 1500 ç­†ï¼     â”‚
â”‚ (OpenSearch æœ€å¤šè¿”å› 500ç­†) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… è§£æ±ºæ–¹æ¡ˆï¼ˆéœ€å¯¦ç¾ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å°‡ 24h åˆ†å‰²æˆå¤šå€‹å°æ™‚é–“çª—å£          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ™‚é–“çª—å£ 1: ç¾åœ¨ â†’ 23 å°æ™‚å‰          â”‚
â”‚   æŸ¥è©¢çµæœ: 150 ç­† âœ…                 â”‚
â”‚                                      â”‚
â”‚ æ™‚é–“çª—å£ 2: 23 å°æ™‚å‰ â†’ 22 å°æ™‚å‰    â”‚
â”‚   æŸ¥è©¢çµæœ: 180 ç­† âœ…                 â”‚
â”‚                                      â”‚
â”‚ æ™‚é–“çª—å£ 3: 22 å°æ™‚å‰ â†’ 21 å°æ™‚å‰    â”‚
â”‚   æŸ¥è©¢çµæœ: 200 ç­† âœ…                 â”‚
â”‚                                      â”‚
â”‚ ... (å…± 24 å€‹æ™‚é–“çª—å£)                â”‚
â”‚                                      â”‚
â”‚ ç¸½è¨ˆ: 2000 ç­† âœ… (ç„¡ä¸Ÿå¤±)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### éšæ®µ 2ï¼šæ•¸æ“šä¿å­˜ (Storage)

#### ğŸ’¾ ä¿å­˜æ ¼å¼

```
./data/opensearch-responses/
â”œâ”€â”€ all-documents_2026-01-10_23-19-38.json
â”‚   {
â”‚     "documents": [
â”‚       {
â”‚         "index": "pp-slot-api-log*",
â”‚         "id": "doc-1",
â”‚         "source": { ... JSON åŸå§‹æ•¸æ“š ... }
â”‚       },
â”‚       ...
â”‚     ],
â”‚     "total_documents": 2000
â”‚   }
â”‚
â”œâ”€â”€ pagination-summary_2026-01-10_23-19-38.json
â”‚   {
â”‚     "timestamp_start": "2026-01-09T23:19:38+08:00",
â”‚     "timestamp_end": "2026-01-10T23:19:38+08:00",
â”‚     "total_hits": 2000,
â”‚     "collected_docs": 2000,
â”‚     "batches": 4,
â”‚     "timed_out": false
â”‚   }
â”‚
â””â”€â”€ raw-response_2026-01-10_23-13-34.json
    (ç¬¬ä¸€æ‰¹åŸå§‹ API å›æ‡‰)
```

#### ğŸ”„ ä¿å­˜é‚è¼¯

```
æ•¸æ“šç²å– (test-pagination/main.go)
         â†“
    é€æ‰¹æ¬¡æ¥æ”¶
         â†“
    ç´¯ç©åˆ°å…§å­˜
         â†“
    å®Œæˆæ‰€æœ‰æ‰¹æ¬¡
         â†“
    ä¸€æ¬¡æ€§ä¿å­˜åˆ° JSON æ–‡ä»¶
         
ç‰¹é»ï¼š
â€¢ å–®ç·šç¨‹ï¼Œä¸å­˜åœ¨ä¸¦ç™¼å•é¡Œ
â€¢ ä»¥æ™‚é–“æˆ³å‘½åï¼Œé¿å…è¦†è“‹
â€¢ åŒ…å«æ‘˜è¦ä¿¡æ¯ï¼ˆä¾¿æ–¼è¿½è¹¤ï¼‰
```

---

### éšæ®µ 3ï¼šæ•¸æ“šåˆ†æ (Analysis)

#### ğŸ” åˆ†æç®¡é“

```
è®€å–ä¿å­˜çš„ JSON
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: Preprocessor            â”‚
â”‚ è¼¸å…¥: RawLog[]                  â”‚
â”‚ å‹•ä½œ: è§£æ JSON + æå–å­—æ®µ      â”‚
â”‚ è¼¸å‡º: ParsedLog[]               â”‚
â”‚ ç·šç¨‹: å–®ç·šç¨‹ï¼Œé †åºè™•ç†          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Normalizer              â”‚
â”‚ è¼¸å…¥: ParsedLog[]               â”‚
â”‚ å‹•ä½œ: è¨ˆç®—æŒ‡ç´‹ + åˆ†çµ„            â”‚
â”‚ è¼¸å‡º: ErrorGroup[]{             â”‚
â”‚         Fingerprint: "abc123",  â”‚
â”‚         Count: 10,              â”‚
â”‚         Logs: [...]             â”‚
â”‚       }                         â”‚
â”‚ ç·šç¨‹: å–®ç·šç¨‹ï¼Œé †åºè™•ç†          â”‚
â”‚ å»é‡: æŒ‰ Fingerprint èšåˆ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Aggregator              â”‚
â”‚ è¼¸å…¥: ErrorGroup[]              â”‚
â”‚ å‹•ä½œ: æ™‚é–“çµ±è¨ˆ + å¯†åº¦è¨ˆç®—        â”‚
â”‚ è¼¸å‡º: AggregationResult{        â”‚
â”‚         HourlyDistribution: {}, â”‚
â”‚         ServiceStats: {},       â”‚
â”‚         ...                     â”‚
â”‚       }                         â”‚
â”‚ ç·šç¨‹: å–®ç·šç¨‹ï¼Œé †åºè™•ç†          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Reporter                â”‚
â”‚ è¼¸å…¥: Analysis[], AggResult     â”‚
â”‚ å‹•ä½œ: ç”Ÿæˆ Markdown å ±å‘Š         â”‚
â”‚ è¼¸å‡º: error_analysis_*.md       â”‚
â”‚ ç·šç¨‹: å–®ç·šç¨‹ï¼Œé †åºè™•ç†          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
ç”Ÿæˆå ±å‘Šå®Œæˆ âœ…
```

---

## ç«¶çˆ­èˆ‡é‡è¤‡è¨ˆç®—å•é¡Œåˆ†æ

### â“ æœƒä¸æœƒæœ‰ç«¶çˆ­å•é¡Œï¼Ÿ

**ç­”æ¡ˆï¼šç›®å‰ NOï¼Œä½†æœ‰æ½›åœ¨é¢¨éšª**

#### ç•¶å‰æ¶æ§‹ï¼ˆå®‰å…¨ï¼‰

```
å–®ç·šç¨‹é †åºåŸ·è¡Œï¼š

main.go
  â”œâ”€ loadRawLogsFromJSON()          â† è®€å– JSONï¼ˆé †åºï¼‰
  â”œâ”€ preprocessor.Process()         â† è§£æï¼ˆé †åºï¼‰
  â”œâ”€ normalizer.Normalize()         â† å»é‡ï¼ˆé †åºï¼‰
  â”œâ”€ aggregator.Aggregate()         â† èšåˆï¼ˆé †åºï¼‰
  â””â”€ reporter.Generate()            â† ç”Ÿæˆï¼ˆé †åºï¼‰

ç‰¹é»ï¼š
âœ… ç„¡ä¸¦ç™¼
âœ… ç„¡ç«¶çˆ­
âœ… ç„¡æ­»é–
âœ… æ˜“æ–¼èª¿è©¦
```

#### æœªä¾†éš±æ‚£ï¼ˆå¤šç·šç¨‹æ™‚ï¼‰

```
å¦‚æœè¦ä¸¦è¡ŒåŒ–ï¼ˆä¾‹å¦‚ï¼šå¤šå€‹æœå‹™åŒæ™‚åˆ†æï¼‰

âŒ éŒ¯èª¤ç¤ºä¾‹ï¼š
goroutine 1: normalizer.Normalize(logs[0:500])
goroutine 2: normalizer.Normalize(logs[500:1000])
goroutine 3: normalizer.Normalize(logs[1000:])
                    â†“
           å…±äº«çš„ fingerprint map
                    â†“
           ğŸš¨ Map ä¸¦ç™¼å¯«å…¥ â†’ panic!

âœ… è§£æ±ºæ–¹æ¡ˆï¼š
1. ä½¿ç”¨ sync.Mutex ä¿è­·å…±äº«æ•¸æ“š
2. ä½¿ç”¨ sync.RWMutex è®€å¯«åˆ†é›¢
3. ä½¿ç”¨ channel åŒ¯èšçµæœ
4. ä½¿ç”¨ atomic æ“ä½œè¨ˆæ•¸
```

### â“ æœƒä¸æœƒæœ‰é‡è¤‡è¨ˆç®—ï¼Ÿ

**ç­”æ¡ˆï¼šYESï¼Œéœ€è¦æ³¨æ„å»é‡ç­–ç•¥**

#### é‡è¤‡æ—¥èªŒä¾†æº

```
å ´æ™¯ 1ï¼šå¢é‡æ›´æ–°æ™‚é‡è¤‡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬ 1 æ¬¡åŸ·è¡Œ              â”‚
â”‚ æŸ¥è©¢: last 24h           â”‚
â”‚ ç²å¾—: æ—¥èªŒ A, B, C       â”‚
â”‚ ä¿å­˜: all-documents_*.json
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
        1 å°æ™‚å¾Œ
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬ 2 æ¬¡åŸ·è¡Œ              â”‚
â”‚ æŸ¥è©¢: last 24h           â”‚
â”‚ ç²å¾—: æ—¥èªŒ A, B, C, D, E â”‚ â† A, B, C é‡è¤‡äº†ï¼
â”‚ ä¿å­˜: all-documents_*.json (æ–°æ–‡ä»¶)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å•é¡Œï¼š
â€¢ A, B, C è¢«é‡è¤‡åˆ†æ
â€¢ çµ±è¨ˆæ•¸æ“šæœƒç–ŠåŠ ï¼ˆè¨ˆæ•¸ç¿»å€ï¼‰
```

#### ç•¶å‰è§£æ±ºæ–¹æ¡ˆ

```
ä½¿ç”¨ Error Fingerprint å»é‡ï¼š

æ—¥èªŒ A: "Connection timeout" â†’ Fingerprint: "abc123"
æ—¥èªŒ B: "Connection timeout to 192.168.x.x" â†’ Fingerprint: "abc123"
æ—¥èªŒ C: "RPC call failed" â†’ Fingerprint: "def456"

åˆ†çµ„çµæœï¼š
{
  "abc123": {
    count: 2,           â† å»é‡å¾Œåªç®— 1 å€‹æŒ‡ç´‹
    logs: [A, B],       â† ä¿å­˜æ‰€æœ‰å‰¯æœ¬
  },
  "def456": {
    count: 1,
    logs: [C],
  }
}

å„ªé»ï¼š
âœ… åŒä¸€éŒ¯èª¤åªè¨ˆç®—ä¸€æ¬¡
âœ… ä¿ç•™æ‰€æœ‰æ—¥èªŒå‰¯æœ¬ä¾¿æ–¼åˆ†æ
âœ… æ˜“æ–¼è­˜åˆ¥ç›¸åŒæ ¹å› çš„ä¸åŒè¡¨ç¾å½¢å¼
```

#### æœªä¾†æ”¹é€²ï¼šå¢é‡æ›´æ–°å»é‡

```
éœ€è¦å¯¦ç¾çš„é‚è¼¯ï¼š

ç¬¬ 2 æ¬¡é‹è¡Œæ™‚ï¼š
1. è¨˜éŒ„å‰ä¸€æ¬¡é‹è¡Œçš„æ™‚é–“æˆ³
   last_run_time = "2026-01-10T23:00:00Z"

2. åªæŸ¥è©¢æ–°æ•¸æ“š
   query: @timestamp > last_run_time

3. èˆ‡æ­·å²æ•¸æ“šå°æ¯”
   - å¦‚æœ fingerprint åœ¨èˆŠæ•¸æ“šä¸­å­˜åœ¨ â†’ æ›´æ–°è¨ˆæ•¸
   - å¦‚æœ fingerprint æ–°å‡ºç¾ â†’ æ–°å¢è­¦å ±

4. åˆä½µçµæœ
   new_stats = old_stats âˆª new_data
```

---

## é‹è¡Œæ¨¡å¼å°æ¯”

### æ¨¡å¼ Aï¼šå®Œæ•´åˆ†æï¼ˆæ¨è–¦ç”¨æ–¼æ—¥å ±ï¼‰

```bash
go run cmd/analyzer/main.go -fetch -time 24h

æµç¨‹ï¼š
1. å¾ OpenSearch æŸ¥è©¢éå» 24 å°æ™‚
2. è‡ªå‹•åˆ†æ‰¹ï¼ˆç•¶å‰ç°¡å–®å¯¦ç¾ï¼Œæœªä¾†æ”¹é€²ç‚ºæ™‚é–“çª—å£åˆ†å‰²ï¼‰
3. ä¿å­˜ JSON
4. ç«‹å³åˆ†æ
5. è¼¸å‡ºå ±å‘Š

æ™‚é–“ï¼š5-15 ç§’
é©åˆï¼šæ™¨å ±ã€å®šæ™‚ä»»å‹™ã€æ‰‹å‹•èª¿æŸ¥
```

### æ¨¡å¼ Bï¼šå¢é‡åˆ†æï¼ˆæ¨è–¦ç”¨æ–¼å¯¦æ™‚ç›£æ§ï¼‰

```bash
# ç¬¬ 1 æ¬¡ï¼ˆå®Œæ•´ï¼‰
go run cmd/test-pagination/main.go \
  -time 1h -output ./data

# ç¬¬ 2 æ¬¡ï¼ˆ1 å°æ™‚å¾Œï¼Œå¢é‡ï¼‰
go run cmd/test-pagination/main.go \
  -time 10m -output ./data

# åˆ†æ
go run cmd/analyzer/main.go -input ./data

æ”¹é€²ç©ºé–“ï¼š
â€¢ è¨˜éŒ„ last_run_time
â€¢ è‡ªå‹•è¨ˆç®—å¢é‡æ™‚é–“
â€¢ åˆä½µå»é‡æ­·å²æ•¸æ“š
â€¢ æª¢æ¸¬æ–°çš„éŒ¯èª¤æ¨¡å¼
```

### æ¨¡å¼ Cï¼šæœ¬åœ°é‡è¤‡åˆ†æ

```bash
# ä¿å­˜ä¸€æ¬¡
go run cmd/test-pagination/main.go -time 24h -output ./data

# å¯ä»¥å¤šæ¬¡åˆ†æè€Œä¸å†æŸ¥è©¢ OpenSearch
go run cmd/analyzer/main.go -input ./data -output ./report1
go run cmd/analyzer/main.go -input ./data -output ./report2
go run cmd/analyzer/main.go -input ./data -output ./report3

å„ªé»ï¼š
âœ… ä¸å½±éŸ¿ OpenSearch
âœ… å¿«é€Ÿé‡è¤‡åˆ†æ
âœ… å˜—è©¦ä¸åŒåƒæ•¸
```

---

## æ•¸æ“šæµå‘åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OpenSearch Dashboards                      â”‚
â”‚                   (2000 ç­†éŒ¯èª¤æ—¥èªŒ)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â†“ (åˆ†æ‰¹æŸ¥è©¢)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ test-pagination/main.go        â”‚
        â”‚ â€¢ ç¬¬ 1 æ‰¹: 0-500 ç­†           â”‚
        â”‚ â€¢ ç¬¬ 2 æ‰¹: 500-1000 ç­†        â”‚
        â”‚ â€¢ ç¬¬ 3 æ‰¹: 1000-1500 ç­†       â”‚
        â”‚ â€¢ ç¬¬ 4 æ‰¹: 1500-2000 ç­†       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â†“ (é€æ‰¹ä¿å­˜)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ./data/opensearch-responses/               â”‚
        â”‚ â””â”€ all-documents_*.json (2000 ç­†)         â”‚
        â”‚ â””â”€ pagination-summary_*.json              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â†“ (ä¸€æ¬¡æ€§è®€å–)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ analyzer/main.go               â”‚
        â”‚ Step 1: Preprocessor (è§£æ)    â”‚
        â”‚   2000 â†’ 2000 ParsedLog        â”‚
        â”‚ Step 2: Normalizer (å»é‡)      â”‚
        â”‚   2000 â†’ 150 ErrorGroup        â”‚
        â”‚ Step 3: Aggregator (èšåˆ)      â”‚
        â”‚   150 â†’ AggregationResult      â”‚
        â”‚ Step 4: Reporter (å ±å‘Š)        â”‚
        â”‚   çµæœ â†’ Markdown              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ./reports/                     â”‚
        â”‚ â””â”€ error_analysis_*.md         â”‚
        â”‚ â””â”€ analysis_*.json             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç¸½çµ

### âœ… ä½ çš„ç†è§£æ­£ç¢º

| éšæ®µ | åç¨± | è·è²¬ | ç•¶å‰ç‹€æ…‹ |
|------|------|------|--------|
| 1 | ç²å– | å¾ OpenSearch åˆ†æ‰¹ç²å–æ—¥èªŒ | âœ… å¯¦ç¾ |
| 2 | ä¿å­˜ | ä¿å­˜åˆ°æœ¬åœ° JSON æ–‡ä»¶ | âœ… å¯¦ç¾ |
| 3 | åˆ†æ | é è™•ç†â†’å»é‡â†’èšåˆâ†’å ±å‘Š | âœ… å¯¦ç¾ |

### âš ï¸ éœ€è¦æ”¹é€²

| é …ç›® | ç¾æ³ | å•é¡Œ | å„ªå…ˆç´š |
|------|------|------|--------|
| **æ™‚é–“çª—å£åˆ†å‰²** | ç°¡å–®å¯¦ç¾ | è¶…é 500 ç­†æ—¥èªŒæœƒä¸Ÿå¤± | ğŸ”´ é«˜ |
| **å¢é‡æ›´æ–°å»é‡** | ç„¡ | é‡è¤‡åŸ·è¡Œæœƒé‡è¤‡è¨ˆç®— | ğŸŸ¡ ä¸­ |
| **ä¸¦ç™¼å®‰å…¨æ€§** | å–®ç·šç¨‹ | ç„¡æ³•ä¸¦è¡ŒåŒ– | ğŸŸ¡ ä¸­ |
| **æ€§èƒ½å„ªåŒ–** | åŸºç¤ç‰ˆ | å¤§è¦æ¨¡æ—¥èªŒè¼ƒæ…¢ | ğŸŸ¢ ä½ |

### ğŸ¯ å¾ŒçºŒæ”¹é€²é †åº

1. **å„ªå…ˆ**ï¼šå¯¦ç¾æ™‚é–“çª—å£åˆ†å‰²ï¼ˆé¿å…æ•¸æ“šä¸Ÿå¤±ï¼‰
2. **æ¬¡è¦**ï¼šå¯¦ç¾å¢é‡å»é‡ï¼ˆæ”¯æŒå¢é‡æ›´æ–°ï¼‰
3. **æœ€å¾Œ**ï¼šä¸¦ç™¼å„ªåŒ–ï¼ˆæ€§èƒ½æå‡ï¼‰
